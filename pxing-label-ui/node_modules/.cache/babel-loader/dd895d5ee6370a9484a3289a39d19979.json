{"remainingRequest":"/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/node_modules/babel-loader/lib/index.js!/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/node_modules/eslint-loader/index.js??ref--13-0!/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/src/utils/zipdownload.js","dependencies":[{"path":"/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/src/utils/zipdownload.js","mtime":1628660985663},{"path":"/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS96aG91cC9JZGVhUHJvamVjdHMvamVldGhpbmsvcHhpbmctbGFibGUtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0IikuZGVmYXVsdDsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kb3duTG9hZFppcCA9IGRvd25Mb2FkWmlwOwpleHBvcnRzLnJlc29sdmVCbG9iID0gcmVzb2x2ZUJsb2I7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiKTsKCnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgbWltZU1hcCA9IHsKICB4bHN4OiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnLAogIHppcDogJ2FwcGxpY2F0aW9uL3ppcCcKfTsKdmFyIGJhc2VVcmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJOwoKZnVuY3Rpb24gZG93bkxvYWRaaXAoc3RyLCBmaWxlbmFtZSkgewogIHZhciB1cmwgPSBiYXNlVXJsICsgc3RyOwogICgwLCBfYXhpb3MuZGVmYXVsdCkoewogICAgbWV0aG9kOiAnZ2V0JywKICAgIHVybDogdXJsLAogICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICBoZWFkZXJzOiB7CiAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICB9CiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXNvbHZlQmxvYihyZXMsIG1pbWVNYXAuemlwKTsKICB9KTsKfQovKioKICog6Kej5p6QYmxvYuWTjeW6lOWGheWuueW5tuS4i+i9vQogKiBAcGFyYW0geyp9IHJlcyBibG9i5ZON5bqU5YaF5a65CiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lVHlwZSBNSU1F57G75Z6LCiAqLwoKCmZ1bmN0aW9uIHJlc29sdmVCbG9iKHJlcywgbWltZVR5cGUpIHsKICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICB0eXBlOiBtaW1lVHlwZQogIH0pOyAvLyAvL+S7jnJlc3BvbnNl55qEaGVhZGVyc+S4reiOt+WPlmZpbGVuYW1lLCDlkI7nq69yZXNwb25zZS5zZXRIZWFkZXIoIkNvbnRlbnQtZGlzcG9zaXRpb24iLCAiYXR0YWNobWVudDsgZmlsZW5hbWU9eHh4eC5kb2N4Iikg6K6+572u55qE5paH5Lu25ZCNOwoKICB2YXIgcGF0dCA9IG5ldyBSZWdFeHAoJ2ZpbGVuYW1lPShbXjtdK1xcLlteXFwuO10rKTsqJyk7CiAgdmFyIGNvbnRlbnREaXNwb3NpdGlvbiA9IGRlY29kZVVSSShyZXMuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddKTsKICB2YXIgcmVzdWx0ID0gcGF0dC5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7CiAgdmFyIGZpbGVOYW1lID0gcmVzdWx0WzFdOwogIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXCIvZywgJycpOwogIGFMaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgYUxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgYUxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVOYW1lKTsgLy8g6K6+572u5LiL6L295paH5Lu25ZCN56ewCgogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwogIGFMaW5rLmNsaWNrKCk7CiAgVVJMLnJldm9rZU9iamVjdFVSTChhTGluay5ocmVmKTsgLy/muIXpmaTlvJXnlKgKCiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhTGluayk7Cn0="},{"version":3,"sources":["/home/zhoup/IdeaProjects/jeethink/pxing-lable-ui/src/utils/zipdownload.js"],"names":["mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","method","responseType","headers","then","res","resolveBlob","mimeType","aLink","document","createElement","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","style","display","href","URL","createObjectURL","setAttribute","body","appendChild","click","revokeObjectURL","removeChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,OAAO,GAAG;AACdC,EAAAA,IAAI,EAAE,mEADQ;AAEdC,EAAAA,GAAG,EAAE;AAFS,CAAhB;AAKA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;;AACO,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,QAA1B,EAAoC;AACzC,MAAIC,GAAG,GAAGP,OAAO,GAAGK,GAApB;AACA,sBAAM;AACJG,IAAAA,MAAM,EAAE,KADJ;AAEJD,IAAAA,GAAG,EAAEA,GAFD;AAGJE,IAAAA,YAAY,EAAE,MAHV;AAIJC,IAAAA,OAAO,EAAE;AAAE,uBAAiB,YAAY;AAA/B;AAJL,GAAN,EAKGC,IALH,CAKQ,UAAAC,GAAG,EAAI;AACbC,IAAAA,WAAW,CAACD,GAAD,EAAMf,OAAO,CAACE,GAAd,CAAX;AACD,GAPD;AAQD;AACD;AACA;AACA;AACA;AACA;;;AACO,SAASc,WAAT,CAAqBD,GAArB,EAA0BE,QAA1B,EAAoC;AACzC,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;AACA,MAAIC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACP,GAAG,CAACQ,IAAL,CAAT,EAAqB;AAAEC,IAAAA,IAAI,EAAEP;AAAR,GAArB,CAAX,CAFyC,CAGzC;;AACA,MAAIQ,IAAI,GAAG,IAAIC,MAAJ,CAAW,+BAAX,CAAX;AACA,MAAIC,kBAAkB,GAAGC,SAAS,CAACb,GAAG,CAACF,OAAJ,CAAY,qBAAZ,CAAD,CAAlC;AACA,MAAIgB,MAAM,GAAGJ,IAAI,CAACK,IAAL,CAAUH,kBAAV,CAAb;AACA,MAAII,QAAQ,GAAGF,MAAM,CAAC,CAAD,CAArB;AACAE,EAAAA,QAAQ,GAAGA,QAAQ,CAACC,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAX;AACAd,EAAAA,KAAK,CAACe,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACAhB,EAAAA,KAAK,CAACiB,IAAN,GAAaC,GAAG,CAACC,eAAJ,CAAoBhB,IAApB,CAAb;AACAH,EAAAA,KAAK,CAACoB,YAAN,CAAmB,UAAnB,EAA+BP,QAA/B,EAXyC,CAWA;;AACzCZ,EAAAA,QAAQ,CAACoB,IAAT,CAAcC,WAAd,CAA0BtB,KAA1B;AACAA,EAAAA,KAAK,CAACuB,KAAN;AACAL,EAAAA,GAAG,CAACM,eAAJ,CAAoBxB,KAAK,CAACiB,IAA1B,EAdyC,CAcT;;AAChChB,EAAAA,QAAQ,CAACoB,IAAT,CAAcI,WAAd,CAA0BzB,KAA1B;AACD","sourcesContent":["import axios from 'axios'\nimport { getToken } from '@/utils/auth'\n\nconst mimeMap = {\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip'\n}\n\nconst baseUrl = process.env.VUE_APP_BASE_API\nexport function downLoadZip(str, filename) {\n  var url = baseUrl + str\n  axios({\n    method: 'get',\n    url: url,\n    responseType: 'blob',\n    headers: { 'Authorization': 'Bearer ' + getToken() }\n  }).then(res => {\n    resolveBlob(res, mimeMap.zip)\n  })\n}\n/**\n * 解析blob响应内容并下载\n * @param {*} res blob响应内容\n * @param {String} mimeType MIME类型\n */\nexport function resolveBlob(res, mimeType) {\n  const aLink = document.createElement('a')\n  var blob = new Blob([res.data], { type: mimeType })\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\n  var result = patt.exec(contentDisposition)\n  var fileName = result[1]\n  fileName = fileName.replace(/\\\"/g, '')\n  aLink.style.display = 'none'\n  aLink.href = URL.createObjectURL(blob)\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\n  document.body.appendChild(aLink)\n  aLink.click()\n  URL.revokeObjectURL(aLink.href);//清除引用\n  document.body.removeChild(aLink);\n}\n"]}]}